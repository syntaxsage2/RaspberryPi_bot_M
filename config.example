# -*- coding:utf-8 -*-
"""
讯飞语音助手配置文件示例
请复制此文件为config.py并填写您的讯飞开放平台凭证
"""

# 讯飞开放平台凭证
# 获取地址：https://console.xfyun.cn/app/myapp
XFYUN_APPID = "您的APPID"
XFYUN_API_KEY = "您的API_KEY"
XFYUN_API_SECRET = "您的API_SECRET"

# 音频参数配置
AUDIO_CONFIG = {
    "sample_rate": 16000,  # 采样率（讯飞ASR要求16000Hz）
    "channels": 1,         # 单声道
    "chunk": 1024,         # 音频块大小
    "format": "int16",     # 音频格式
    "record_seconds": 5,   # 录音时长（秒）
    "input_device_index": 1,  # 麦克风设备ID（树莓派USB音频设备）
}

# ASR（语音识别）配置
ASR_CONFIG = {
    "domain": "slm",       # 使用大模型服务
    "language": "zh_cn",   # 中文
    "accent": "mandarin",  # 普通话
    "dwa": "wpgs",         # 动态修正
}

# TTS（语音合成）配置 - 超拟人发音人
TTS_CONFIG = {
    "vcn": "x5_lingyuyan_flow",      # 发音人
    "speed": 50,                     # 语速（0-100）
    "volume": 50,                    # 音量（0-100）
    "pitch": 50,                     # 音高（0-100）
    "audio_encoding": "lame",        # mp3格式
    "sample_rate": 24000,            # 采样率（超拟人推荐24000Hz）
}

# 文件路径配置
OUTPUT_DIR = "./audio_files"
RECORDED_AUDIO = f"{OUTPUT_DIR}/recorded.wav"  # 改为WAV格式，便于检查采样率
TTS_AUDIO = f"{OUTPUT_DIR}/tts_output.mp3"

# ==============================================================
# Porcupine 唤醒词配置
# 获取Access Key: https://console.picovoice.ai/
# ==============================================================

# Porcupine Access Key（必填）
PORCUPINE_ACCESS_KEY = "从 https://console.picovoice.ai/ 获取"

# 是否使用自定义模型
PORCUPINE_USE_CUSTOM = True  # True=使用自定义模型, False=使用内置唤醒词

# 自定义模型配置（当 PORCUPINE_USE_CUSTOM=True 时使用）
PORCUPINE_CUSTOM_MODEL_PATH = "./小智_zh_raspberry-pi_v3_0_0.ppn"
PORCUPINE_CUSTOM_KEYWORD = "小智小智"
PORCUPINE_LANGUAGE_MODEL_PATH = "./models/porcupine_params_zh.pv"  # 中文语言模型

# 内置唤醒词配置（当 PORCUPINE_USE_CUSTOM=False 时使用）
# 可选: porcupine, picovoice, bumblebee, alexa, hey google 等
PORCUPINE_BUILTIN_KEYWORDS = ["porcupine"]

# 敏感度配置（0.0-1.0）
# 0.0: 不敏感（误唤醒少，但可能漏检）
# 0.5: 平衡（推荐）
# 1.0: 非常敏感（易误唤醒）
PORCUPINE_SENSITIVITY = 0.5

# VAD配置
VAD_CONFIG = {
    "aggressiveness": 2,              # WebRTC VAD敏感度 0-3（推荐2）
    "min_silence_duration_ms": 800,   # 最小静音时长（说完多久算结束）
}

# 唤醒后配置
WAKE_RESPONSE_CONFIG = {
    "response_audio": "./audio_files/你好明.wav",  # 唤醒后播放的音频文件
    "listen_timeout": 30,                           # 唤醒后等待用户说话的超时时间（秒）
    "return_to_wake_mode": True,                   # 回复后是否继续监听唤醒词
}